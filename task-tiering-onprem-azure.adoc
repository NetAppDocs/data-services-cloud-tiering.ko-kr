---
sidebar: sidebar 
permalink: task-tiering-onprem-azure.html 
keywords: data tiering, fabricpool, cloud tiering, tiering cold data, tiering inactive data, tiering aff, tiering fas, tiering ontap, tiering volumes, tier data, tier cold data, tier fas, tier aff, tier ontap, azure, blob, azure blob 
summary: 비활성 데이터를 Azure Blob Storage로 계층화하여 온-프레미스 ONTAP 클러스터의 공간을 확보하세요. 
---
= NetApp Cloud Tiering에서 온프레미스 ONTAP 클러스터의 데이터를 Azure Blob 스토리지로 계층화
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
비활성 데이터를 Azure Blob Storage로 계층화하여 온-프레미스 ONTAP 클러스터의 공간을 확보하세요.  비활성 데이터를 Azure Blob Storage로 계층화하여 온-프레미스 ONTAP 클러스터의 공간을 확보하세요.



== 빠른 시작

다음 단계에 따라 빠르게 시작하거나, 나머지 섹션으로 스크롤하여 자세한 내용을 확인하세요.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["하나"]Azure Blob 저장소에 데이터 계층화 준비
[role="quick-margin-para"]
다음이 필요합니다.

[role="quick-margin-list"]
* NetApp 콘솔에 추가한 ONTAP 9.4 이상을 실행하는 온프레미스 ONTAP 클러스터와 Azure Blob 스토리지에 대한 HTTPS 연결. https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["클러스터를 검색하는 방법을 알아보세요"^] .
* Azure VNet이나 온프레미스에 설치된 콘솔 에이전트입니다.
* 데이터 센터의 ONTAP 클러스터, Azure 스토리지 및 Cloud Tiering 서비스에 대한 아웃바운드 HTTPS 연결을 지원하는 에이전트에 대한 네트워킹입니다.


.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["둘"]계층화 설정
[role="quick-margin-para"]
NetApp 콘솔에서 온-프레미스 ONTAP 시스템을 선택하고 계층화 서비스에 대해 *사용*을 선택한 다음, 화면의 지시에 따라 데이터를 Azure Blob 스토리지로 계층화합니다.

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png["삼"]라이센스 설정
[role="quick-margin-para"]
무료 평가판이 종료된 후에는 사용량에 따른 요금 구독, ONTAP Cloud Tiering BYOL 라이선스 또는 두 가지를 조합하여 Cloud Tiering 비용을 지불하세요.

[role="quick-margin-list"]
* Azure Marketplace에서 구독하려면 https://azuremarketplace.microsoft.com/en-us/marketplace/apps/netapp.cloud-manager?tab=Overview["마켓플레이스 상품으로 이동"^] , *구독*을 선택한 다음, 안내를 따르세요.
* Cloud Tiering BYOL 라이선스를 사용하여 지불하려면 mailto:ng-cloud-tiering@netapp.com?subject=Licensing[구매해야 하는 경우 문의]으로 이메일을 보내십시오.link:https://docs.netapp.com/us-en/bluexp-digital-wallet/task-manage-data-services-licenses.html["NetApp 콘솔에 추가하세요"] .




== 요구 사항

ONTAP 클러스터에 대한 지원을 확인하고, 네트워킹을 설정하고, 개체 스토리지를 준비합니다.

다음 이미지는 각 구성 요소와 구성 요소 간에 준비해야 하는 연결을 보여줍니다.

image:diagram_cloud_tiering_azure.png["클라우드 공급자의 콘솔 에이전트에 연결된 Cloud Tiering 서비스, ONTAP 클러스터에 연결된 에이전트, ONTAP 클러스터와 클라우드 공급자의 개체 스토리지 간의 연결을 보여주는 아키텍처 이미지입니다.  활성 데이터는 ONTAP 클러스터에 저장되고, 비활성 데이터는 개체 스토리지에 저장됩니다."]


NOTE: 콘솔 에이전트와 Blob 스토리지 간의 통신은 개체 스토리지 설정을 위한 것입니다.  에이전트는 클라우드가 아닌 고객사 내에 상주할 수 있습니다.



=== ONTAP 클러스터 준비

Azure Blob 스토리지에 데이터를 계층화할 때 ONTAP 클러스터는 다음 요구 사항을 충족해야 합니다.

지원되는 ONTAP 플랫폼::
+
--
* ONTAP 9.8 이상을 사용하는 경우: AFF 시스템이나 FAS 시스템의 데이터를 모든 SSD 집계 또는 모든 HDD 집계를 사용하여 계층화할 수 있습니다.
* ONTAP 9.7 및 이전 버전을 사용하는 경우: 모든 SSD 집계를 사용하여 AFF 시스템 또는 FAS 시스템의 데이터를 계층화할 수 있습니다.


--
지원되는 ONTAP 버전:: ONTAP 9.4 이상
클러스터 네트워킹 요구 사항::
+
--
* ONTAP 클러스터는 포트 443을 통해 Azure Blob 스토리지에 HTTPS 연결을 시작합니다.
+
ONTAP 객체 스토리지에서 데이터를 읽고 씁니다.  객체 스토리지는 결코 시작되지 않고, 단지 응답만 합니다.

+
ExpressRoute는 더 나은 성능과 더 낮은 데이터 전송 요금을 제공하지만 ONTAP 클러스터와 Azure Blob 스토리지 간에는 필수가 아닙니다.  하지만 그렇게 하는 것이 가장 권장되는 방법입니다.

* Azure VNet이나 사용자 온프레미스에 상주할 수 있는 에이전트에서 인바운드 연결이 필요합니다.
+
클러스터와 Cloud Tiering 서비스 간의 연결은 필요하지 않습니다.

* 계층화하려는 볼륨을 호스팅하는 각 ONTAP 노드에는 클러스터 간 LIF가 필요합니다.  LIF는 ONTAP 개체 스토리지에 연결하는 데 사용해야 하는 _IPspace_와 연결되어야 합니다.
+
데이터 계층화를 설정하면 Cloud Tiering에서 사용할 IP 공간을 입력하라는 메시지가 표시됩니다.  각 LIF가 연결된 IP 공간을 선택해야 합니다.  이는 "기본" IP 공간일 수도 있고 사용자가 만든 사용자 지정 IP 공간일 수도 있습니다.  자세히 알아보세요 https://docs.netapp.com/us-en/ontap/networking/create_a_lif.html["LIFs"^] 그리고 https://docs.netapp.com/us-en/ontap/networking/standard_properties_of_ipspaces.html["IP 공간"^] .



--
지원되는 볼륨 및 집계:: Cloud Tiering에서 계층화할 수 있는 볼륨의 총 수는 ONTAP 시스템의 볼륨 수보다 적을 수 있습니다.  이는 일부 집계에서 볼륨을 계층화할 수 없기 때문입니다.  ONTAP 설명서를 참조하세요. https://docs.netapp.com/us-en/ontap/fabricpool/requirements-concept.html#functionality-or-features-not-supported-by-fabricpool["FabricPool 에서 지원하지 않는 기능 또는 특징"^] .



NOTE: Cloud Tiering은 ONTAP 9.5부터 FlexGroup 볼륨을 지원합니다.  설치는 다른 볼륨과 동일하게 진행됩니다.



=== ONTAP 클러스터를 찾아보세요

콜드 데이터의 계층화를 시작하려면 먼저 NetApp 콘솔에 온프레미스 ONTAP 시스템을 추가해야 합니다.

https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["클러스터를 검색하는 방법을 알아보세요"^] .



=== 에이전트 생성 또는 전환

데이터를 클라우드로 계층화하려면 에이전트가 필요합니다.  Azure Blob 저장소에 데이터를 계층화할 때 Azure VNet이나 사내에 있는 에이전트를 사용할 수 있습니다.  새 에이전트를 만들어야 하며 현재 선택된 에이전트가 Azure 또는 온-프레미스에 있는지 확인해야 합니다.

* https://docs.netapp.com/us-en/bluexp-setup-admin/concept-connectors.html["에이전트에 대해 알아보세요"^]
* https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-azure.html["Azure에 에이전트 배포"^]
* https://docs.netapp.com/us-en/bluexp-setup-admin/task-quick-start-connector-on-prem.html["Linux 호스트에 에이전트 설치"^]




=== 필요한 에이전트 권한이 있는지 확인하세요

3.9.25 버전 이상을 사용하여 콘솔 에이전트를 생성한 경우 모든 준비가 완료된 것입니다.  Azure 네트워크 내에서 리소스와 프로세스를 관리하는 데 필요한 권한을 에이전트에게 제공하는 사용자 지정 역할이 기본적으로 설정됩니다.  를 참조하십시오 https://docs.netapp.com/us-en/bluexp-setup-admin/reference-permissions-azure.html#custom-role-permissions["필수 사용자 정의 역할 권한"^] 그리고 https://docs.netapp.com/us-en/bluexp-setup-admin/reference-permissions-azure.html#cloud-tiering["클라우드 티어링에 필요한 특정 권한"^] .

이전 버전을 사용하여 에이전트를 만든 경우 Azure 계정의 권한 목록을 편집하여 누락된 권한을 추가해야 합니다.



=== 콘솔 에이전트를 위한 네트워킹 준비

콘솔 에이전트에 필요한 네트워크 연결이 있는지 확인하세요.  에이전트는 온프레미스나 Azure에 설치할 수 있습니다.

.단계
. 에이전트가 설치된 네트워크에서 다음 연결이 허용되는지 확인하세요.
+
** 포트 443을 통해 Cloud Tiering 서비스 및 Azure Blob 개체 저장소에 HTTPS 연결(https://docs.netapp.com/us-en/bluexp-setup-admin/task-set-up-networking-azure.html#endpoints-contacted-for-day-to-day-operations["엔드포인트 목록을 확인하세요"^] )
** ONTAP 클러스터 관리 LIF에 대한 포트 443을 통한 HTTPS 연결


. 필요한 경우 Azure Storage에 대한 VNet 서비스 엔드포인트를 활성화합니다.
+
ONTAP 클러스터에서 VNet으로 ExpressRoute 또는 VPN 연결이 있고 에이전트와 Blob 스토리지 간 통신을 가상 사설망에 유지하려는 경우 Azure 스토리지에 대한 VNet 서비스 엔드포인트를 사용하는 것이 좋습니다.





=== Azure Blob 저장소 준비

계층화를 설정할 때는 사용할 리소스 그룹과 리소스 그룹에 속하는 스토리지 계정 및 Azure 컨테이너를 식별해야 합니다.  스토리지 계정을 사용하면 Cloud Tiering이 데이터 계층화에 사용되는 Blob 컨테이너를 인증하고 액세스할 수 있습니다.

클라우드 티어링은 에이전트를 통해 액세스할 수 있는 모든 지역의 모든 스토리지 계정에 대한 티어링을 지원합니다.

클라우드 티어링은 일반 용도 v2 및 프리미엄 블록 Blob 유형의 스토리지 계정만 지원합니다.


NOTE: 특정 기간 후에 계층화된 데이터가 전환되는 비용이 낮은 액세스 계층을 사용하도록 클라우드 계층화를 구성하려는 경우 Azure 계정에서 컨테이너를 설정할 때 어떠한 수명 주기 규칙도 선택해서는 안 됩니다.  클라우드 티어링은 수명 주기 전환을 관리합니다.



== 첫 번째 클러스터에서 비활성 데이터를 Azure Blob 저장소로 계층화합니다.

Azure 환경을 준비한 후 첫 번째 클러스터에서 비활성 데이터의 계층화를 시작합니다.

.필요한 것
https://docs.netapp.com/us-en/bluexp-ontap-onprem/task-discovering-ontap.html["NetApp 콘솔에 대한 온프레미스 ONTAP 시스템"^] .

.단계
. 온프레미스 ONTAP 시스템을 선택하세요.
. 오른쪽 패널에서 계층화 서비스에 대해 *활성화*를 클릭합니다.
+
Azure Blob 계층화 대상이 시스템 페이지에 시스템으로 존재하는 경우 클러스터를 Azure Blob 시스템으로 끌어서 놓으면 설치 마법사를 시작할 수 있습니다.

+
image:screenshot_setup_tiering_onprem.png["온프레미스 ONTAP 시스템을 선택한 후 화면 오른쪽에 나타나는 활성화 옵션을 보여주는 스크린샷입니다."]

. *개체 저장소 이름 정의*: 이 개체 저장소의 이름을 입력합니다.  이 클러스터에서 집계와 함께 사용할 수 있는 다른 개체 저장소와 고유해야 합니다.
. *공급자 선택*: *Microsoft Azure*를 선택하고 *계속*을 선택합니다.
. *공급자 선택*: *Microsoft Azure*를 선택하고 *계속*을 선택합니다.
. *개체 저장소 만들기* 페이지의 단계를 완료하세요.
+
.. *리소스 그룹*: 기존 컨테이너가 관리되는 리소스 그룹이나 계층형 데이터에 대한 새 컨테이너를 만들 리소스 그룹을 선택하고 *계속*을 선택합니다.
.. *리소스 그룹*: 기존 컨테이너가 관리되는 리소스 그룹이나 계층형 데이터에 대한 새 컨테이너를 만들 리소스 그룹을 선택하고 *계속*을 선택합니다.
+
온-프레미스 에이전트를 사용하는 경우 리소스 그룹에 대한 액세스를 제공하는 Azure 구독을 입력해야 합니다.

.. *Azure 컨테이너*: 저장소 계정에 새 Blob 컨테이너를 추가하거나 기존 컨테이너를 사용하려면 라디오 버튼을 선택하세요.  그런 다음 스토리지 계정을 선택하고 기존 컨테이너를 선택하거나 새 컨테이너의 이름을 입력합니다.  그런 다음 *계속*을 선택하세요.
.. *Azure 컨테이너*: 저장소 계정에 새 Blob 컨테이너를 추가하거나 기존 컨테이너를 사용하려면 라디오 버튼을 선택하세요.  그런 다음 스토리지 계정을 선택하고 기존 컨테이너를 선택하거나 새 컨테이너의 이름을 입력합니다.  그런 다음 *계속*을 선택하세요.
+
이 단계에 나타나는 저장소 계정과 컨테이너는 이전 단계에서 선택한 리소스 그룹에 속합니다.

.. *액세스 계층 수명 주기*: 클라우드 계층화는 계층화된 데이터의 수명 주기 전환을 관리합니다.  데이터는 _Hot_ 클래스에서 시작하지만, 특정 일수 후에 데이터에 _Cool_ 클래스를 적용하는 규칙을 만들 수 있습니다.
+
계층화된 데이터를 전환할 액세스 계층과 데이터가 해당 계층에 할당되기 전까지의 일수를 선택한 후 *계속*을 선택합니다.  예를 들어, 아래 스크린샷은 계층화된 데이터가 개체 저장소에서 45일이 지나면 _Hot_ 클래스에서 _Cool_ 클래스로 할당되는 것을 보여줍니다.

+
*이 액세스 계층에 데이터 유지*를 선택하면 데이터는 _핫_ 액세스 계층에 유지되며 규칙은 적용되지 않습니다. link:reference-azure-support.html["지원되는 액세스 계층 보기"^] .

+
image:screenshot_tiering_lifecycle_selection_azure.png["특정 일수 후에 데이터에 할당되는 다른 액세스 계층을 선택하는 방법을 보여주는 스크린샷입니다."]

+
선택한 스토리지 계정의 모든 Blob 컨테이너에 수명 주기 규칙이 적용됩니다.

.. *클러스터 네트워크*: ONTAP 개체 스토리지에 연결하는 데 사용할 IP 공간을 선택하고 *계속*을 선택합니다.
+
올바른 IP 공간을 선택하면 Cloud Tiering이 ONTAP 에서 클라우드 공급자의 개체 스토리지로의 연결을 설정할 수 있습니다.

+
"최대 전송 속도"를 정의하여 비활성 데이터를 개체 스토리지에 업로드하는 데 사용할 수 있는 네트워크 대역폭을 설정할 수도 있습니다.  *제한됨* 라디오 버튼을 선택하고 사용 가능한 최대 대역폭을 입력하거나, *무제한*을 선택하여 제한이 없음을 나타냅니다.



. _계층 볼륨_ 페이지에서 계층화를 구성하려는 볼륨을 선택하고 계층화 정책 페이지를 시작합니다.
+
** 모든 볼륨을 선택하려면 제목 행의 상자를 선택하십시오.image:button_backup_all_volumes.png[""] )을 클릭하고 *볼륨 구성*을 선택합니다.
** 여러 볼륨을 선택하려면 각 볼륨의 상자를 선택하십시오.image:button_backup_1_volume.png[""] )을 클릭하고 *볼륨 구성*을 선택합니다.
** 단일 볼륨을 선택하려면 행을 선택하세요(또는image:screenshot_edit_icon.gif["연필 아이콘 편집"] 볼륨에 대한 아이콘)입니다.
+
image:screenshot_tiering_initial_volumes.png["단일 볼륨, 여러 볼륨 또는 모든 볼륨을 선택하는 방법과 선택한 볼륨을 수정하는 버튼을 보여주는 스크린샷입니다."]



. _계층화 정책_ 대화 상자에서 계층화 정책을 선택하고, 선택적으로 선택한 볼륨에 대한 냉각 일수를 조정하고, *적용*을 선택합니다.
+
link:concept-cloud-tiering.html#volume-tiering-policies["볼륨 티어링 정책 및 쿨링 데이에 대해 자세히 알아보세요."] .

+
image:screenshot_tiering_initial_policy_settings.png["구성 가능한 계층화 정책 설정을 보여주는 스크린샷입니다."]



.결과
클러스터의 볼륨에서 Azure Blob 개체 스토리지로 데이터 계층화를 성공적으로 설정했습니다.

.다음은 무엇인가요?
link:task-licensing-cloud-tiering.html["클라우드 티어링 서비스에 가입하세요"] .

클러스터의 활성 및 비활성 데이터에 대한 정보를 검토할 수 있습니다. link:task-managing-tiering.html["계층화 설정 관리에 대해 자세히 알아보세요"] .

클러스터의 특정 집계에서 다른 개체 저장소로 데이터를 계층화하려는 경우 추가 개체 저장소를 만들 수도 있습니다.  또는 계층화된 데이터가 추가 개체 저장소에 복제되는 FabricPool Mirroring을 사용할 계획인 경우입니다. link:task-managing-object-storage.html["객체 저장소 관리에 대해 자세히 알아보세요"] .
